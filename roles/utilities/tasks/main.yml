- name: Installing Fish
  apt:
    name: 
      - fish
    state: latest


- name: Downloading Oh-My-Fish
  uri:
    url: https://get.oh-my.fish
    follow_redirects: all
    dest: ~/omf_install



- name: Configuring Oh-My-Fish
  shell: " {{ item }}"
  with_items: 
      - fish /root/omf_install --path=~/.local/share/omf --config=~/.config/omf
      - chsh -s `which fish`
      - omf install mars


- name: Configuring Obey2 greeting
  command: cp ~/Desktop/kalima_ansible/roles/utilities/files/obey2 ~/.config/fish/obey2


- name: Configuring Oh-My-Fish
  shell: " {{ item }}"
  with_items: 
      - echo set fish_greeting >> ~/.config/fish/config.fish
      - echo "~/.config/fish/obey2" >> ~/.config/fish/config.fish

- name: Making obey2 Executable
  file:
    path: ~/.config/fish/obey2
    owner: root
    group: root
    mode: '0755'


- name: Removing useless Kali directories
  file:
    path: "{{ item }}"
    state: absent
  with_items:
    - ~/Public
    - ~/Templates
    - ~/Music
    

